<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>اختبار الإشعارات - مركز الراشد</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #f4f7f9; }
        .test-card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: inline-block; }
        button { padding: 15px 30px; font-size: 18px; cursor: pointer; background: #1c4587; color: white; border: none; border-radius: 10px; }
        .status { margin-top: 20px; font-weight: bold; color: #ef4444; }
    </style>
</head>
<body>

<div class="test-card">
    <h2>اختبار نظام إشعارات الموبايل</h2>
    <p>اضغط على الزر أدناه لتفعيل واختبار الإشعار</p>
    <button onclick="runTest()">اضغط هنا للاختبار</button>
    <div id="status" class="status"></div>
</div>

<script>
    function runTest() {
        const statusDiv = document.getElementById('status');
        
        if (!("Notification" in window)) {
            statusDiv.innerText = "هذا المتصفح لا يدعم الإشعارات نهائياً";
            return;
        }

        Notification.requestPermission().then(permission => {
            if (permission === "granted") {
                statusDiv.style.color = "green";
                statusDiv.innerText = "تم منح الإذن! انتظر الإشعار...";
                
                // إرسال الإشعار
                try {
                    const options = {
                        body: "هذا إشعار تجريبي من مركز الراشد. إذا رأيت هذا، فنظامك جاهز!",
                        icon: "https://cdn-icons-png.flaticon.com/512/1161/1161388.png",
                        requireInteraction: true // يجعل الإشعار يبقى حتى يغلقه المستخدم
                    };
                    const n = new Notification("اختبار بنجاح ✅", options);
                    
                    n.onclick = function() {
                        alert("تم الضغط على الإشعار!");
                    };
                } catch (e) {
                    statusDiv.style.color = "red";
                    statusDiv.innerText = "حدث خطأ أثناء إرسال الإشعار: " + e.message;
                }
            } else {
                statusDiv.innerText = "تم رفض الإذن. يرجى تفعيله من إعدادات المتصفح بجانب رابط الموقع.";
            }
        });
    }
</script>

</body>
</html>
